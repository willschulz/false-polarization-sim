<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Censorship Multi-Stage Visualization Dashboard</title>
    
    <!-- External Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.min.js"></script>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <!-- Main Container with Sidebar Layout -->
    <div class="app-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <!-- Header Content -->
            <div class="sidebar-header">
                <h1>Polarization by Selection</h1>
                <!-- <p class="subtitle">
                    Exploring how user-level self-selection and attitude-level self-censorship 
                    create false polarization in visible ideologies
                </p> -->
            </div>

            <!-- Control Panel -->
            <div class="controls" id="controlPanel">
                <div class="control-group button-group">
                    <button id="sampleBtn" class="btn btn-primary">Sample Once</button>
                    <button id="autoBtn" class="btn btn-secondary">Start Auto Sample</button>
                    <button id="resetBtn" class="btn btn-danger">Reset</button>
                </div>

                

                <div class="control-group">
                    <label>Political tweeting model</label>
                    
                    <p class="model-code">pol_tw_rate ~ user_ideo + user_ideo^2</p>
                    <div>
                        <small><strong>Linear (Right-Leaning): </strong><span id="lmLinearVal">0.0000</span></small>
                        <input id="lmLinearSlider" type="range" min="-1" max="1" step="0.0005" value="0">
                        <div class="slider-scale" id="lmLinearScale">
                            <span class="tick">-2</span>
                            <span class="tick">-1</span>
                            <span class="tick">ESTIMATE</span>
                            <span class="tick">+1</span>
                            <span class="tick">+2</span>
                        </div>
                    </div>
                    <div>
                        <small><strong>Quadratic (Polarizing): </strong><span id="lmQuadraticVal">0.0000</span></small>
                        <input id="lmQuadraticSlider" type="range" min="-1" max="1" step="0.0005" value="0">
                        <div class="slider-scale" id="lmQuadraticScale">
                            <span class="tick">-2</span>
                            <span class="tick">-1</span>
                            <span class="tick">ESTIMATE</span>
                            <span class="tick">+1</span>
                            <span class="tick">+2</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <label>Issue selection model</label>
                    <p class="model-code">topic_rate ~ topic_stance + topic_stance^2</p>
                    <div>
                        <small><strong>Linear (Right-Leaning): </strong> <span id="issueSelLinearVal">0.000000</span></small>
                        <input id="issueSelLinearSlider" type="range" min="-1" max="1" step="0.0005" value="0">
                        <div class="slider-scale" id="issueSelLinearScale">
                            <span class="tick">-2</span>
                            <span class="tick">-1</span>
                            <span class="tick">ESTIMATE</span>
                            <span class="tick">+1</span>
                            <span class="tick">+2</span>
                        </div>
                    </div>
                    <div>
                        <small><strong>Quadratic (Polarizing): </strong><span id="issueSelQuadraticVal">0.000000</span></small>
                        <input id="issueSelQuadraticSlider" type="range" min="-1" max="1" step="0.0005" value="0">
                        <div class="slider-scale" id="issueSelQuadraticScale">
                            <span class="tick">-2</span>
                            <span class="tick">-1</span>
                            <span class="tick">ESTIMATE</span>
                            <span class="tick">+1</span>
                            <span class="tick">+2</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <label for="issuesSlider">Number of issues per user: <span id="issuesVal">20</span></label>
                    <input id="issuesSlider" type="range" min="3" max="50" step="1" value="20">
                    <small class="help-text">How many political issues each user has opinions about</small>
                </div>
            </div>
            
            <!-- Explanation Panel -->
            <div class="explanation">
                <h3>How to Read This Visualization</h3>
                <p>
                    At the top of the sampling process, users are assumed to  be drawn from a normal ideology distribution. We suppose that users tweet at equal rates, and draw user-tweets from the population without bias.  These authorship events pass through a gray "USER SELECTION" band, representing user-level self-selection into political versus non-political posting; political tweets turn yellow, while non-political tweets turn purple after the filter.  This causes the distribution of political tweets to be more spread out (polarized) than the initial sample of users.
                    To visualize attitude selection, we suppose that users' attitudes are normally-distributed around their ideological center, and represent these attitudes as circles.  The circles pass through a gray "ATTITUDE SELECTION" band, which selects the attitude for the user's political tweet using weights derived from our multilevel model.  The selected attitude turns orange after the band, other attitudes turn Green.  This attitude-level selection causes the visible attitudes to be even more polarized than the initial sample of users, or the political-tweeting distribution.
                </p>
            </div>

            <!-- Footer Content -->
            <div class="sidebar-footer">
                <p>
                    This visualization was inspired by the Central Limit Theorem demonstration at <a href="https://seeing-theory.brown.edu/probability-distributions/index.html">Seeing Theory</a> (Kunin, Guo, Devlin & Xiang), which was built on Mike Bostockâ€™s JavaScript library <a href="https://d3js.org/">D3.js</a>.
                </p>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="visualization">
                <div id="vizColumn" class="viz-column">
                    <div id="canvasContainer"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript Modules -->
    <script src="assets/js/config.js"></script>
    <script src="assets/js/selection.js"></script>
    <script src="assets/js/ball.js"></script>
    <script src="assets/js/histogram.js"></script>
    <script src="assets/js/visualization.js"></script>
    <script src="assets/js/controls.js"></script>
    <script src="assets/js/main.js"></script>
</body>
</html> 